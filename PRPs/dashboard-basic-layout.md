# MX Space Dashboard åŸºç¡€å¸ƒå±€å®ç°

## ğŸ“‹ æ¦‚è¿°

ä¸º MX Space åšå®¢ç®¡ç†ç³»ç»Ÿåˆ›å»ºå®Œæ•´çš„ Dashboard åŸºç¡€å¸ƒå±€ï¼ŒåŒ…å«ä¸»å¸ƒå±€ç»“æ„ã€å¤šæ¨¡å—å¯¼èˆªç³»ç»Ÿå’Œå“åº”å¼è®¾è®¡ã€‚è¿™ä¸ª Dashboard å°†æ•´åˆæ‰€æœ‰ 40+ API æ¨¡å—ï¼Œæä¾›ç»Ÿä¸€çš„ç®¡ç†ç•Œé¢ã€‚

**ç›®æ ‡ä½ç½®**: `apps/dashboard/src/pages/(dashboard)/`  
**ä¸»è¦æŠ€æœ¯**: React 19, React Router 7, Jotai, TailwindCSS 4, Radix UI, Framer Motion
**å®ç°ç›®æ ‡**: ä¸€æ¬¡æ€§å®Œæ•´å®ç°å¯æ‰©å±•çš„ Dashboard åŸºç¡€æ¶æ„

---

## ğŸ¯ æ ¸å¿ƒéœ€æ±‚

### åŠŸèƒ½éœ€æ±‚

1. **ä¸»å¸ƒå±€ç³»ç»Ÿ**: ä¾§è¾¹æ  + ä¸»å†…å®¹åŒºçš„ç»å…¸ Dashboard å¸ƒå±€
2. **å¤šçº§å¯¼èˆª**: 6 å¤§åŠŸèƒ½æ¨¡å—ï¼Œæ”¯æŒå­é¡µé¢å¯¼èˆªå’Œé¢åŒ…å±‘
3. **å“åº”å¼è®¾è®¡**: æ¡Œé¢ç«¯ä¾§è¾¹æ ï¼Œç§»åŠ¨ç«¯åº•éƒ¨å¯¼èˆª + æŠ½å±‰
4. **æ¨¡å—åŒ–æ¶æ„**: æ¯ä¸ªåŠŸèƒ½æ¨¡å—ç‹¬ç«‹è·¯ç”±å’Œå¸ƒå±€ç»„ä»¶
5. **å®æ—¶æ›´æ–°**: å¾½ç« æ•°å­—ã€é€šçŸ¥æé†’ç­‰å®æ—¶æ•°æ®å±•ç¤º
6. **æƒé™æ§åˆ¶**: åŸºäºç”¨æˆ·è§’è‰²çš„èœå•é¡¹æ˜¾ç¤ºæ§åˆ¶

### æŠ€æœ¯éœ€æ±‚

1. **æ–‡ä»¶è·¯ç”±**: ä½¿ç”¨ç°æœ‰çš„ `vite-plugin-route-builder` è‡ªåŠ¨è·¯ç”±ç³»ç»Ÿ
2. **å¸ƒå±€åµŒå¥—**: æ”¯æŒå¤šå±‚å¸ƒå±€åµŒå¥— (ä¸»å¸ƒå±€ > æ¨¡å—å¸ƒå±€ > é¡µé¢)
3. **çŠ¶æ€ç®¡ç†**: Jotai ç®¡ç†å¯¼èˆªçŠ¶æ€ã€ç”¨æˆ·ä¿¡æ¯ã€å®æ—¶æ•°æ®
4. **æ€§èƒ½ä¼˜åŒ–**: è·¯ç”±æ‡’åŠ è½½ã€ä»£ç åˆ†å‰²ã€ç¼“å­˜ç­–ç•¥
5. **å¯è®¿é—®æ€§**: é”®ç›˜å¯¼èˆªã€ARIA æ ‡ç­¾ã€å±å¹•é˜…è¯»å™¨æ”¯æŒ

---

## ğŸ—ï¸ æ•´ä½“å¸ƒå±€æ¶æ„

### æ¡Œé¢ç«¯å¸ƒå±€ (â‰¥1200px)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [ğŸ ] MX Space    [ğŸ” Smart Search]    [ğŸ””3] [@user] [âš™ï¸] [ğŸŒ™]   â”‚ 64px
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ“Š Activity  ğŸ“ Write  ğŸ“„ Content  ğŸ’¬ Engage  ğŸ¤– AI  ğŸ“ˆ Insightsâ”‚ 48px  
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â˜€ï¸ Good morning! You have 3 pending items          [â–¼ More]     â”‚ 80px
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Activity Feed (60%)        â”‚ Quick Actions (40%)                â”‚
â”‚                            â”‚                                    â”‚
â”‚ â”Œâ”€ Activity Item â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”Œâ”€ Quick Actions â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚ ğŸ’¬ 2m ago               â”‚ â”‚ â”‚ âœï¸ Write New Post           â”‚   â”‚
â”‚ â”‚ New comment on "React"  â”‚ â”‚ â”‚ ğŸ“Š View Analytics          â”‚   â”‚
â”‚ â”‚ by Zhang San            â”‚ â”‚ â”‚ ğŸ’¬ Moderate Comments       â”‚   â”‚
â”‚ â”‚                [Reply] â”‚ â”‚ â”‚ ğŸ”„ Sync Content            â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚ ğŸ¤– AI Content Ideas        â”‚   â”‚
â”‚                            â”‚ â”‚ âš™ï¸ System Settings         â”‚   â”‚
â”‚ â”Œâ”€ Activity Item â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚ â”‚ ğŸ“ 15m ago              â”‚ â”‚                                    â”‚
â”‚ â”‚ Draft "Next.js" updated â”‚ â”‚ â”Œâ”€ AI Insights â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚ â”‚                [Edit âœ] â”‚ â”‚ â”‚ ğŸ“ˆ Weekly Growth: +8%      â”‚    â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚ ğŸ”¥ Hot Topics:            â”‚    â”‚
â”‚                            â”‚ â”‚   â€¢ Next.js                â”‚    â”‚
â”‚ [Load More...]             â”‚ â”‚   â€¢ TypeScript             â”‚    â”‚
â”‚                            â”‚ â”‚ ğŸ’¡ AI Suggestions: 3       â”‚    â”‚
â”‚                            â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ç§»åŠ¨ç«¯å¸ƒå±€ (<768px)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [â˜°] MX Space      [ğŸ””] [@user] [â€¢] â”‚ 56px
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ“Š Dashboard                        â”‚ 48px Tab
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                     â”‚
â”‚ â”Œâ”€ Page Content â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚ â”‚                               â”‚  â”‚
â”‚ â”‚  [é¡µé¢å†…å®¹åŒºåŸŸ]                â”‚  â”‚
â”‚ â”‚                               â”‚  â”‚
â”‚ â”‚  æ ¹æ®ä¸åŒé¡µé¢æ˜¾ç¤º:              â”‚  â”‚
â”‚ â”‚  â€¢ ç»Ÿè®¡å¡ç‰‡ (Dashboard)       â”‚  â”‚
â”‚ â”‚  â€¢ å†…å®¹åˆ—è¡¨ (ç®¡ç†é¡µé¢)         â”‚  â”‚
â”‚ â”‚  â€¢ è¡¨å• (è®¾ç½®/ç¼–è¾‘)           â”‚  â”‚
â”‚ â”‚                               â”‚  â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [ğŸ“Š] [ğŸ“] [ğŸ’¬] [âš™ï¸] [â€¢â€¢â€¢]         â”‚ 56px
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ—‚ï¸ å¯¼èˆªç»“æ„è®¾è®¡

### ä¸»å¯¼èˆªæ¶æ„
```typescript
interface NavigationItem {
  id: string
  label: string
  icon: string
  route: string
  badge?: () => number | string
  description?: string
  children?: NavigationItem[]
  permission?: string[]
  highlight?: boolean
}

const navigationStructure: NavigationItem[] = [
  {
    id: 'dashboard',
    label: 'æ¦‚è§ˆ',
    icon: 'i-mingcute-dashboard-line',
    route: '/dashboard',
    description: 'æ•°æ®æ¦‚è§ˆå’Œå¿«é€Ÿæ“ä½œ'
  },
  
]
```

---

## ğŸ—‚ï¸ æ–‡ä»¶è·¯ç”±ç»“æ„

### è·¯ç”±æ–‡ä»¶ç»„ç»‡
```
src/pages/
â”‚   â”œâ”€â”€ layout.tsx                    # ä¸» Dashboard å¸ƒå±€
â”‚   â”œâ”€â”€ index.sync.tsx               # æ¦‚è§ˆé¡µé¢ (Dashboard é¦–é¡µ)
```

---

## ğŸ¨ æ ¸å¿ƒç»„ä»¶è®¾è®¡è§„èŒƒ

### 1. ä¸» Dashboard å¸ƒå±€ç»„ä»¶
```typescript
// src/pages/(dashboard)/layout.tsx
interface DashboardLayoutProps {
  children: React.ReactNode
}

const DashboardLayout = ({ children }: DashboardLayoutProps) => {
  const [sidebarOpen, setSidebarOpen] = useAtom(sidebarOpenAtom)
  const [user] = useAtom(userAtom)
  const layout = useResponsiveLayout()
  
  return (
    <div className="min-h-screen bg-background">
      {/* é¡¶éƒ¨å¯¼èˆªæ  */}
      <Header 
        user={user}
        onMenuToggle={() => setSidebarOpen(!sidebarOpen)}
        layout={layout}
      />
      
      <div className="flex">
        {/* ä¾§è¾¹æ  (æ¡Œé¢ç«¯) */}
        {layout === 'desktop' && (
          <Sidebar 
            navigation={navigationStructure}
            open={sidebarOpen}
            onToggle={setSidebarOpen}
          />
        )}
        
        {/* ä¸»å†…å®¹åŒº */}
        <main className={`flex-1 ${layout === 'desktop' && sidebarOpen ? 'ml-60' : ''}`}>
          <div className="p-6">
            <Outlet />
          </div>
        </main>
      </div>
      
      {/* ç§»åŠ¨ç«¯åº•éƒ¨å¯¼èˆª */}
      {layout === 'mobile' && (
        <BottomNavigation navigation={mobileNavigation} />
      )}
      
      {/* ç§»åŠ¨ç«¯ä¾§æ»‘æŠ½å±‰ */}
      {layout === 'mobile' && (
        <MobileDrawer 
          open={sidebarOpen}
          onClose={() => setSidebarOpen(false)}
          navigation={navigationStructure}
        />
      )}
    </div>
  )
}
```

### 2. é¡¶éƒ¨å¯¼èˆªæ è®¾è®¡
```typescript
// src/components/dashboard/Header.tsx
interface HeaderProps {
  user: User
  onMenuToggle: () => void
  layout: 'desktop' | 'tablet' | 'mobile'
}

const headerStyles = {
  container: 'h-16 bg-background border-b border-border px-6 flex items-center justify-between',
  
  left: {
    brand: 'flex items-center gap-3',
    logo: 'w-8 h-8 bg-accent rounded-lg flex items-center justify-center',
    title: 'text-lg font-semibold text-text hidden sm:block'
  },
  
  right: {
    actions: 'flex items-center gap-2',
    button: 'w-10 h-10 rounded-lg hover:bg-fill flex items-center justify-center',
    avatar: 'w-8 h-8 rounded-full bg-fill'
  }
}

const Header = ({ user, onMenuToggle, layout }: HeaderProps) => {
  return (
    <header className={headerStyles.container}>
      {/* å·¦ä¾§ Logo åŒºåŸŸ */}
      <div className={headerStyles.left.brand}>
        {layout === 'mobile' && (
          <button onClick={onMenuToggle} className={headerStyles.right.button}>
            <i className="i-mingcute-menu-line w-5 h-5" />
          </button>
        )}
        
        <div className={headerStyles.left.logo}>
          <i className="i-mingcute-lightning-line w-5 h-5 text-background" />
        </div>
        
        <h1 className={headerStyles.left.title}>MX Space Dashboard</h1>
      </div>
      
      {/* å³ä¾§æ“ä½œåŒºåŸŸ */}
      <div className={headerStyles.right.actions}>
        {/* é€šçŸ¥æŒ‰é’® */}
        <button className={headerStyles.right.button}>
          <i className="i-mingcute-notification-line w-5 h-5" />
          {/* é€šçŸ¥å¾½ç«  */}
          <span className="absolute -top-1 -right-1 w-4 h-4 bg-red text-background text-xs rounded-full">
            3
          </span>
        </button>
        
        {/* è®¾ç½®æŒ‰é’® */}
        <button className={headerStyles.right.button}>
          <i className="i-mingcute-settings-3-line w-5 h-5" />
        </button>
        
        {/* ä¸»é¢˜åˆ‡æ¢ */}
        <ThemeToggle />
        
        {/* ç”¨æˆ·å¤´åƒ */}
        <UserDropdown user={user} />
      </div>
    </header>
  )
}
```

### 3. ä¾§è¾¹æ å¯¼èˆªè®¾è®¡
```typescript
// src/components/dashboard/Sidebar.tsx
interface SidebarProps {
  navigation: NavigationItem[]
  open: boolean
  onToggle: (open: boolean) => void
}

const sidebarStyles = {
  container: 'fixed left-0 top-16 h-[calc(100vh-4rem)] w-60 bg-background border-r border-border transition-transform duration-300',
  
  navigation: {
    container: 'p-4 space-y-2 overflow-y-auto h-full',
    section: 'space-y-1',
    sectionTitle: 'px-3 py-2 text-xs font-semibold text-placeholder-text uppercase tracking-wider'
  },
  
  item: {
    default: 'flex items-center gap-3 px-3 py-2 rounded-lg text-sm font-medium transition-colors',
    inactive: 'text-placeholder-text hover:text-text hover:bg-fill',
    active: 'text-accent bg-accent/10',
    
    icon: 'w-5 h-5 flex-shrink-0',
    label: 'flex-1',
    badge: 'ml-auto px-2 py-0.5 bg-red text-background text-xs rounded-full',
    chevron: 'w-4 h-4 transition-transform'
  },
  
  submenu: {
    container: 'ml-8 mt-1 space-y-1',
    item: 'flex items-center gap-3 px-3 py-1.5 rounded-lg text-sm transition-colors',
    inactive: 'text-placeholder-text hover:text-text hover:bg-fill',
    active: 'text-accent bg-accent/10'
  }
}

const Sidebar = ({ navigation, open, onToggle }: SidebarProps) => {
  const location = useLocation()
  
  return (
    <aside className={`${sidebarStyles.container} ${open ? 'translate-x-0' : '-translate-x-full'}`}>
      <nav className={sidebarStyles.navigation.container}>
        {navigation.map((section) => (
          <div key={section.id} className={sidebarStyles.navigation.section}>
            {/* ä¸€çº§èœå•é¡¹ */}
            <NavigationItem 
              item={section}
              isActive={location.pathname.startsWith(section.route)}
              level={0}
            />
            
            {/* äºŒçº§èœå• */}
            {section.children && (
              <div className={sidebarStyles.submenu.container}>
                {section.children.map((child) => (
                  <NavigationItem
                    key={child.id}
                    item={child}
                    isActive={location.pathname === child.route}
                    level={1}
                  />
                ))}
              </div>
            )}
          </div>
        ))}
      </nav>
    </aside>
  )
}
```

### 4. é¢åŒ…å±‘å¯¼èˆªè®¾è®¡
```typescript
// src/components/dashboard/Breadcrumb.tsx
interface BreadcrumbProps {
  items: BreadcrumbItem[]
}

interface BreadcrumbItem {
  label: string
  href?: string
  active?: boolean
}

const breadcrumbStyles = {
  container: 'flex items-center space-x-2 text-sm mb-6',
  item: 'flex items-center',
  link: 'text-placeholder-text hover:text-text transition-colors',
  active: 'text-text font-medium',
  separator: 'mx-2 text-placeholder-text'
}

const Breadcrumb = ({ items }: BreadcrumbProps) => {
  return (
    <nav className={breadcrumbStyles.container}>
      {items.map((item, index) => (
        <div key={index} className={breadcrumbStyles.item}>
          {index > 0 && (
            <i className={`i-mingcute-arrow-right-line w-4 h-4 ${breadcrumbStyles.separator}`} />
          )}
          
          {item.href && !item.active ? (
            <Link to={item.href} className={breadcrumbStyles.link}>
              {item.label}
            </Link>
          ) : (
            <span className={item.active ? breadcrumbStyles.active : breadcrumbStyles.link}>
              {item.label}
            </span>
          )}
        </div>
      ))}
    </nav>
  )
}
```

### 5. ç§»åŠ¨ç«¯åº•éƒ¨å¯¼èˆªè®¾è®¡
```typescript
// src/components/dashboard/BottomNavigation.tsx
interface BottomNavigationProps {
  navigation: MobileNavigationItem[]
}

interface MobileNavigationItem {
  icon: string
  label: string
  route?: string
  action?: string
  badge?: number | null
}

const bottomNavStyles = {
  container: 'fixed bottom-0 left-0 right-0 h-14 bg-background/95 backdrop-blur-lg border-t border-border z-50',
  grid: 'grid grid-cols-5 h-full',
  
  item: {
    default: 'flex flex-col items-center justify-center gap-1 transition-colors',
    inactive: 'text-placeholder-text',
    active: 'text-accent',
    
    icon: 'w-5 h-5',
    label: 'text-xs font-medium',
    badge: 'absolute -top-1 -right-1 w-4 h-4 bg-red text-background text-xs rounded-full flex items-center justify-center'
  }
}

const BottomNavigation = ({ navigation }: BottomNavigationProps) => {
  const location = useLocation()
  
  return (
    <nav className={bottomNavStyles.container}>
      <div className={bottomNavStyles.grid}>
        {navigation.map((item) => {
          const isActive = item.route && location.pathname.startsWith(item.route)
          
          return (
            <button
              key={item.label}
              className={`${bottomNavStyles.item.default} ${
                isActive ? bottomNavStyles.item.active : bottomNavStyles.item.inactive
              }`}
              onClick={() => {
                if (item.route) {
                  navigate(item.route)
                } else if (item.action) {
                  // æ‰§è¡Œç‰¹å®šæ“ä½œï¼Œå¦‚æ‰“å¼€æŠ½å±‰
                }
              }}
            >
              <div className="relative">
                <i className={`${item.icon} ${bottomNavStyles.item.icon}`} />
                {item.badge && (
                  <span className={bottomNavStyles.item.badge}>
                    {item.badge}
                  </span>
                )}
              </div>
              <span className={bottomNavStyles.item.label}>{item.label}</span>
            </button>
          )
        })}
      </div>
    </nav>
  )
}

// ç§»åŠ¨ç«¯å¯¼èˆªé…ç½®
const mobileNavigation: MobileNavigationItem[] = [
  {
    icon: 'i-mingcute-dashboard-line',
    label: 'æ¦‚è§ˆ',
    route: '/dashboard'
  },
   
]
```

---

## ğŸ”§ çŠ¶æ€ç®¡ç†æ¶æ„

### Jotai åŸå­çŠ¶æ€è®¾è®¡
```typescript
// src/atoms/dashboard.ts
import { atom } from 'jotai'
import { atomWithStorage } from 'jotai/utils'

// UI çŠ¶æ€
export const sidebarOpenAtom = atomWithStorage('dashboard-sidebar-open', true)
export const mobileDrawerOpenAtom = atom(false)
export const currentRouteAtom = atom('')

// ç”¨æˆ·çŠ¶æ€
export const userAtom = atom<User | null>(null)
export const userPermissionsAtom = atom<string[]>([])

// å®æ—¶æ•°æ®çŠ¶æ€
export const notificationCountAtom = atom(0)
export const pendingCommentsCountAtom = atom(0)
export const unreadFeedbackCountAtom = atom(0)

// å¯¼èˆªçŠ¶æ€
export const navigationAtom = atom(navigationStructure)
export const breadcrumbAtom = atom<BreadcrumbItem[]>([])

// æ´¾ç”ŸçŠ¶æ€
export const filteredNavigationAtom = atom((get) => {
  const navigation = get(navigationAtom)
  const permissions = get(userPermissionsAtom)
  
  return navigation.filter(item => {
    if (!item.permission) return true
    return item.permission.some(p => permissions.includes(p))
  })
})

// å®æ—¶æ•°æ®è·å–
export const dashboardStatsAtom = atom(async () => {
  const response = await fetch('/api/dashboard/stats')
  return response.json()
})
```

---

## ğŸ¨ æ ¸å¿ƒé¡µé¢å¸ƒå±€ç¤ºä¾‹

### 1. Dashboard æ¦‚è§ˆé¡µ
```typescript
// src/pages/(dashboard)/index.sync.tsx
export const Component = () => {
  const [stats] = useAtom(dashboardStatsAtom)
  
  return (
    <div className="space-y-6">
      {/* é¡µé¢æ ‡é¢˜ */}
      <div className="flex items-center justify-between">
        <div>
          <h1 className="text-2xl font-bold text-text">Dashboard æ¦‚è§ˆ</h1>
          <p className="text-placeholder-text mt-1">æ¬¢è¿å›æ¥ï¼ŒæŸ¥çœ‹æ‚¨çš„åšå®¢æ•°æ®</p>
        </div>
        <div className="flex gap-2">
          <Button variant="secondary">
            <i className="i-mingcute-refresh-1-line w-4 h-4 mr-2" />
            åˆ·æ–°
          </Button>
          <Button variant="primary">
            <i className="i-mingcute-download-line w-4 h-4 mr-2" />
            å¯¼å‡ºæŠ¥å‘Š
          </Button>
        </div>
      </div>
      
      {/* ç»Ÿè®¡å¡ç‰‡åŒºåŸŸ */}
      <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
        <StatsCard
          title="æ€»æ–‡ç« æ•°"
          value={stats?.posts?.total || 0}
          change={stats?.posts?.change || 0}
          icon="i-mingcute-file-text-line"
          color="blue"
        />
        <StatsCard
          title="è¯„è®ºæ•°"
          value={stats?.comments?.total || 0}
          change={stats?.comments?.change || 0}
          icon="i-mingcute-chat-3-line"
          color="green"
        />
        <StatsCard
          title="è®¿é—®é‡"
          value={stats?.views?.total || 0}
          change={stats?.views?.change || 0}
          icon="i-mingcute-eye-line"
          color="purple"
        />
        <StatsCard
          title="è®¢é˜…æ•°"
          value={stats?.subscribers?.total || 0}
          change={stats?.subscribers?.change || 0}
          icon="i-mingcute-user-follow-line"
          color="orange"
        />
      </div>
      
      {/* ä¸»è¦å†…å®¹åŒºåŸŸ */}
      <div className="grid grid-cols-1 lg:grid-cols-3 gap-6">
        {/* å¿«é€Ÿæ“ä½œ */}
        <div className="lg:col-span-1">
          <QuickActions />
        </div>
        
        {/* æœ€è¿‘æ´»åŠ¨ */}
        <div className="lg:col-span-2">
          <RecentActivity />
        </div>
      </div>
      
      {/* å›¾è¡¨åŒºåŸŸ */}
      <div className="grid grid-cols-1 lg:grid-cols-2 gap-6">
        <TrafficChart />
        <ContentPerformanceChart />
      </div>
    </div>
  )
}
```

### 2. å†…å®¹ç®¡ç†æ¨¡å—å¸ƒå±€
```typescript
// src/pages/(dashboard)/content/layout.tsx
export const Component = () => {
  const location = useLocation()
  const [breadcrumb] = useAtom(breadcrumbAtom)
  
  useEffect(() => {
    // æ ¹æ®å½“å‰è·¯ç”±æ›´æ–°é¢åŒ…å±‘
    updateBreadcrumb(location.pathname)
  }, [location])
  
  return (
    <div className="space-y-6">
      {/* é¢åŒ…å±‘å¯¼èˆª */}
      <Breadcrumb items={breadcrumb} />
      
      {/* æ¨¡å—å­å¯¼èˆª */}
      <div className="border-b border-border">
        <nav className="flex space-x-8">
          <NavLink 
            to="/dashboard/content/posts"
            className={({ isActive }) => 
              `py-2 px-1 border-b-2 font-medium text-sm ${
                isActive 
                  ? 'border-accent text-accent' 
                  : 'border-transparent text-placeholder-text hover:text-text'
              }`
            }
          >
            æ–‡ç« ç®¡ç†
          </NavLink>
          <NavLink 
            to="/dashboard/content/pages"
            className={({ isActive }) => 
              `py-2 px-1 border-b-2 font-medium text-sm ${
                isActive 
                  ? 'border-accent text-accent' 
                  : 'border-transparent text-placeholder-text hover:text-text'
              }`
            }
          >
            é¡µé¢ç®¡ç†
          </NavLink>
          <NavLink to="/dashboard/content/taxonomy">åˆ†ç±»æ ‡ç­¾</NavLink>
          <NavLink to="/dashboard/content/media">åª’ä½“åº“</NavLink>
        </nav>
      </div>
      
      {/* å†…å®¹åŒºåŸŸ */}
      <Outlet />
    </div>
  )
}
```

---

## âš™ï¸ å“åº”å¼è®¾è®¡ç­–ç•¥

### æ–­ç‚¹è®¾è®¡
```typescript
const breakpoints = {
  mobile: { max: '767px' },
  tablet: { min: '768px', max: '1199px' },
  desktop: { min: '1200px' }
}

interface ResponsiveConfig {
  mobile: {
    sidebar: 'hidden',          // éšè—ä¾§è¾¹æ 
    navigation: 'bottom',       // åº•éƒ¨å¯¼èˆª
    content: 'full-width',      // å…¨å®½å†…å®¹
    drawer: 'overlay'           // æµ®å±‚æŠ½å±‰
  },
  
  tablet: {
    sidebar: 'collapsible',     // å¯æ”¶èµ·ä¾§è¾¹æ 
    navigation: 'sidebar',      // ä¾§è¾¹å¯¼èˆª
    content: 'with-sidebar',    // å¸¦ä¾§è¾¹æ å†…å®¹
    drawer: 'none'              // æ— æŠ½å±‰
  },
  
  desktop: {
    sidebar: 'always-visible',  // å§‹ç»ˆæ˜¾ç¤º
    navigation: 'sidebar',      // ä¾§è¾¹å¯¼èˆª  
    content: 'with-sidebar',    // å¸¦ä¾§è¾¹æ å†…å®¹
    drawer: 'none'              // æ— æŠ½å±‰
  }
}
```

### å“åº”å¼ Hook
```typescript
// src/hooks/useResponsiveLayout.ts
export const useResponsiveLayout = () => {
  const [layout, setLayout] = useState<'mobile' | 'tablet' | 'desktop'>('desktop')
  
  useEffect(() => {
    const mediaQueries = {
      mobile: window.matchMedia('(max-width: 767px)'),
      tablet: window.matchMedia('(min-width: 768px) and (max-width: 1199px)'),
      desktop: window.matchMedia('(min-width: 1200px)')
    }
    
    const updateLayout = () => {
      if (mediaQueries.mobile.matches) {
        setLayout('mobile')
      } else if (mediaQueries.tablet.matches) {
        setLayout('tablet')
      } else {
        setLayout('desktop')
      }
    }
    
    // åˆå§‹åŒ–
    updateLayout()
    
    // ç›‘å¬å˜åŒ–
    Object.values(mediaQueries).forEach(mq => {
      mq.addEventListener('change', updateLayout)
    })
    
    return () => {
      Object.values(mediaQueries).forEach(mq => {
        mq.removeEventListener('change', updateLayout)
      })
    }
  }, [])
  
  return layout
}
```

---

## âœ… å®ç°éªŒè¯æ¸…å•

### å¼€å‘éªŒè¯
```bash
# ç±»å‹æ£€æŸ¥
cd apps/dashboard && npm run build

# ä»£ç è§„èŒƒæ£€æŸ¥  
cd apps/dashboard && npm run lint

# å¼€å‘æœåŠ¡å™¨å¯åŠ¨æµ‹è¯•
cd apps/dashboard && npm run dev
```

### åŠŸèƒ½éªŒè¯æ¸…å•
- [ ] ä¸» Dashboard å¸ƒå±€æ­£ç¡®æ¸²æŸ“
- [ ] ä¾§è¾¹æ å¯¼èˆªå±•å¼€/æ”¶èµ·åŠŸèƒ½æ­£å¸¸
- [ ] å¤šçº§å¯¼èˆªé«˜äº®çŠ¶æ€æ­£ç¡®
- [ ] é¢åŒ…å±‘å¯¼èˆªæ›´æ–°å‡†ç¡®
- [ ] ç§»åŠ¨ç«¯åº•éƒ¨å¯¼èˆªåˆ‡æ¢æ­£å¸¸
- [ ] ç§»åŠ¨ç«¯æŠ½å±‰èœå•æ­£å¸¸å·¥ä½œ
- [ ] å“åº”å¼æ–­ç‚¹åˆ‡æ¢æµç•…
- [ ] è·¯ç”±è·³è½¬å’ŒåµŒå¥—å¸ƒå±€æ­£ç¡®
- [ ] å¾½ç« æ•°å­—å®æ—¶æ›´æ–°
- [ ] æƒé™æ§åˆ¶èœå•æ˜¾ç¤ºæ­£ç¡®

### æ€§èƒ½éªŒè¯
- [ ] é¡µé¢é¦–æ¬¡åŠ è½½æ—¶é—´ < 2s
- [ ] è·¯ç”±åˆ‡æ¢å»¶è¿Ÿ < 300ms
- [ ] ç§»åŠ¨ç«¯äº¤äº’å“åº” < 100ms
- [ ] å†…å­˜å ç”¨åˆç† (< 50MB)
- [ ] æ— æ˜æ˜¾çš„å†…å­˜æ³„æ¼

---

## ğŸ¯ å®ç°ä¼˜å…ˆçº§

**Phase 1 (æ ¸å¿ƒå¸ƒå±€)**:
1. ä¸» Dashboard å¸ƒå±€ç»„ä»¶
2. é¡¶éƒ¨å¯¼èˆªæ 
3. ä¾§è¾¹æ å¯¼èˆª
4. åŸºç¡€è·¯ç”±ç»“æ„
5. å“åº”å¼æ–­ç‚¹åˆ‡æ¢

**Phase 2 (å¢å¼ºåŠŸèƒ½)**:
6. é¢åŒ…å±‘å¯¼èˆª
7. ç§»åŠ¨ç«¯åº•éƒ¨å¯¼èˆª
8. ç§»åŠ¨ç«¯æŠ½å±‰èœå•
9. çŠ¶æ€ç®¡ç†é›†æˆ
10. å®æ—¶æ•°æ®å¾½ç« 

**Phase 3 (ä¼˜åŒ–å®Œå–„)**:
11. åŠ¨ç”»å’Œè¿‡æ¸¡æ•ˆæœ
12. é”®ç›˜å¯¼èˆªæ”¯æŒ
13. æ— éšœç¢è®¿é—®ä¼˜åŒ–
14. æ€§èƒ½ä¼˜åŒ–
15. é”™è¯¯è¾¹ç•Œå¤„ç†

---

## ğŸ’¡ PRP ç½®ä¿¡åº¦è¯„åˆ†: 9/10

**é«˜ç½®ä¿¡åº¦å› ç´ **:
- âœ… æ˜ç¡®çš„å¸ƒå±€æ¶æ„è®¾è®¡
- âœ… å®Œæ•´çš„å¯¼èˆªç»“æ„è§„åˆ’
- âœ… è¯¦ç»†çš„ç»„ä»¶å®ç°è§„èŒƒ
- âœ… æ¸…æ™°çš„æ–‡ä»¶è·¯ç”±ç»„ç»‡
- âœ… å®Œå–„çš„å“åº”å¼ç­–ç•¥
- âœ… ç°æœ‰æŠ€æœ¯æ ˆå®Œå…¨å…¼å®¹

**éœ€è¦æ³¨æ„çš„é£é™©**:
- å¤šå±‚å¸ƒå±€åµŒå¥—çš„å¤æ‚æ€§ç®¡ç†
- ç§»åŠ¨ç«¯æ‰‹åŠ¿äº¤äº’å®ç°ç»†èŠ‚

è¿™ä¸ª PRP æä¾›äº†å®Œæ•´çš„ Dashboard åŸºç¡€å¸ƒå±€å®ç°æŒ‡å—ï¼Œå¯ä»¥æ”¯æ’‘ä¸€æ¬¡æ€§æˆåŠŸå®ç°ã€‚